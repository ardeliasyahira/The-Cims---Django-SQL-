<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Create Barang</title>
    <script
        type="text/javascript"
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    ></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #a8d3f1;">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Tokoh
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/create/pemain/create_tokoh">Buat Tokoh</a></li>
                        <li><a class="dropdown-item" href="/tokoh/pemain_read_tokoh">List Tokoh</a></li>
                        <li><a class="dropdown-item" href="/warnakulit/pemain/list_warna_kulit">List Warna Kulit</a></li>
                        <li><a class="dropdown-item" href="/level/pemain/list_level">List Level</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Pekerjaan
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/pekerjaan/read_pekerjaan">List Pekerjaan</a></li>
                        <li><a class="dropdown-item" href="/pekerjaan/pemain_create_bekerja">Buat Bekerja</a></li>
                        <li><a class="dropdown-item" href="/pekerjaan/read_bekerja">List Bekerja</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Misi
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/menjalankan_misi/pemain_create_menjalankan_misiutama">Buat Menjalankan Misi Utama</a></li>
                        <li><a class="dropdown-item" href="/misi_utama/pemain_read_misiutama">List Misi Utama</a></li>
                        <li><a class="dropdown-item" href="/menjalankan_misi/pemain_read_menjalankan_misiutama">List Menjalankan Misi Utama</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Makan
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/makan/pemain_create_makan">Buat Makan</a></li>
                        <li><a class="dropdown-item" href="/makanan/pemain_read_makanan">List Makanan</a></li>
                        <li><a class="dropdown-item" href="/makan/pemain_read_makan">List Makan</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Koleksi
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <!-- <li><a class="dropdown-item" href="/koleksi/admin/create_koleksi">Buat Koleksi</a></li> -->
                        <li><a class="dropdown-item" href="/koleksi/pemain/list_koleksi">List Koleksi</a></li>
                        <!-- <li><a class="dropdown-item" href="/kategori_apparel/admin/create_kategoriapparel">Buat Kategori Apparel</a></li> -->
                        <li><a class="dropdown-item" href="/kategori_apparel/pemain/list_kategoriapparel">List Kategori Apparel</a></li>
                        <!-- <li><a class="dropdown-item" href="/kategori_apparel/admin/delete_kategoriapparel">Hapus Kategori Apparel</a></li> -->
                        <!-- <li><a class="dropdown-item" href="/koleksi_tokoh/admin/create_koleksitokoh">Buat Koleksi Tokoh</a></li> -->
                        <li><a class="dropdown-item" href="/koleksi_tokoh/pemain/list_koleksitokoh">List Koleksi Tokohl</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Penggunaan
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="/menggunakan_apparel/pemain/create_menggunakan_apparel">Buat Menggunakan Apparel</a></li>
                        <li><a class="dropdown-item" href="/menggunakan_apparel/pemain/list_menggunakan_apparel">List Menggunakan Apparel</a></li>
                        <li><a class="dropdown-item" href="/barang/pemain_create_barang">Buat Menggunakan Barang</a></li>
                        <li><a class="dropdown-item" href="/barang/pemain_read_barang">List Menggunakan Barang</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">Logout</a>
                </li>
            </ul>
        </div>
    </nav>
    <p>Form Menggunakan Barang</p>
    
    <div class="container" style="margin-top: 40px; text-align: center;">
        <h2>Form Buat Menggunakan Barang</h2>
        <br>
        <form action='' method="POST">
          {% csrf_token %}
          <div class="form-group">
              <label>Nama tokoh : </label>
              {{ form.nama_tokoh }}
          </div>
          <br>
          <div class="form-group">
              <label>Barang : </label>
              {{ form.barang }}
          </div>
          <br>
          <button type="submit" class="btn btn-success">Pakai</button>
      </form>
      </div>
    <script>
        $(document).ready(function() {
            $.ajax({
                url: "/barang/pemain_create_barang",
                type:'GET', 
                data: {
                    'nama_tokoh': $("nama_tokoh").val(),
                },
                beforeSend: function() {
                    $("barang").empty();
                    $("barang").append('<option> Load Data... </option>')
                },
                success: function(res) {
                    $("#barang").empty();
                    data = res["barang_milik_tokoh"];
                    for (let i=0; i < data.length; i++) {
                        $("barang").append(`<option value="${data[i]}">${data[i]}</option>`)
                    }
                }
            });
            $("#tokoh").change(function() {
                $.ajax({
                    url: "/pekerjaan/pemain_create_barang",
                    type: 'GET', 
                    data: {
                        'nama_tokoh': $("nama_tokoh").val(),
                    },
                    beforeSend: function() {
                        $("barang").empty();
                        $("barang").append(`<option>Load data...</option>`)
                    },
                    success: function(res) {
                        $("barang").empty();
                        data = res["barang_milik_tokoh"];
                        for (let i = 0; i < data.length; i++) {
                            $("barang").append(`<option value="${data[i]}">${data[i]}</option>`)
                        }
                    }
                });
            });
        });
    </script>
</body>